<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Fake ML Lobby Generator</title>

<style>
body {
  background: #0b1020;
  color: white;
  font-family: Arial;
  margin: 0;
  padding: 20px;
  text-align: center;
}

.container {
  max-width: 400px;
  margin: auto;
}

input, button {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
}

button {
  background: gold;
  font-weight: bold;
  cursor: pointer;
}

canvas {
  width: 100%;
  margin-top: 20px;
  border-radius: 10px;
  background: #000;
}

small {
  opacity: 0.6;
}
</style>
</head>

<body>

<div class="container">
  <h2>Fake ML Lobby Generator</h2>

  <input type="file" id="photo" accept="image/*">
  <input type="text" id="username" placeholder="Username ML">

  <button onclick="generate()">Generate</button>

  <canvas id="canvas" width="1080" height="1920"></canvas>

  <button onclick="download()">Download Gambar</button>

  <small>Fan-made / parody only</small>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

// BACKGROUND
const bg = new Image();
bg.src = "background.png";

// BENDERA (PNG TRANSPARAN)
const flag = new Image();
flag.src = "flag-id.png";

// FOTO USER
let userPhoto = null;

bg.onload = () => drawAll();

// upload foto
document.getElementById("photo").addEventListener("change", e => {
  userPhoto = new Image();
  userPhoto.src = URL.createObjectURL(e.target.files[0]);
  userPhoto.onload = () => drawAll();
});

// DRAW SEMUA LAYER (URUTAN PENTING)
function drawAll() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // 1️⃣ Background (paling bawah)
  ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);

  // 2️⃣ Foto user
  if (userPhoto) {
    ctx.drawImage(userPhoto, 420, 520, 240, 240);
  }

  // 3️⃣ Bendera (HARUS SETELAH FOTO)
  ctx.drawImage(flag, 380, 500, 60, 60);

  // 4️⃣ Username
  const name = document.getElementById("username").value;
  ctx.fillStyle = "white";
  ctx.font = "36px Arial";
  ctx.textAlign = "center";
  ctx.fillText(name, 540, 820);
}

function generate() {
  drawAll();
}

function download() {
  const link = document.createElement("a");
  link.download = "fake-ml-lobby.png";
  link.href = canvas.toDataURL();
  link.click();
}
</script>

</body>
</html>